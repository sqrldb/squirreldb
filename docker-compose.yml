services:
  squirreldb:
    build: .
    # Or use: image: squirreldb/squirreldb:latest
    ports:
      - "8080:8080"   # HTTP/WebSocket API
      - "8081:8081"   # Admin UI
      - "8082:8082"   # TCP binary protocol
      - "8083:8083"   # MCP (AI assistants)
      - "9000:9000"   # S3-compatible storage
      - "6379:6379"   # Redis-compatible cache
    volumes:
      - squirreldb_data:/app/data
    environment:
      SQRL_BACKEND: sqlite
      SQRL_LOG_LEVEL: info
      SQRL_STORAGE_ENABLED: "true"
      SQRL_CACHE_ENABLED: "true"
      SQRL_MCP_ENABLED: "true"
    healthcheck:
      test: ["CMD", "sqrl", "status"]
      interval: 30s
      timeout: 5s
      retries: 3
    restart: unless-stopped

volumes:
  squirreldb_data:
